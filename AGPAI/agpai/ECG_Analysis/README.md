# ECG心电图脆性分析系统

## 🫀 系统概述
基于Agent2 v5.0血糖脆性分析架构开发的ECG脆性分析系统，专门用于心电图信号的脆性评估、智能分段和心血管疾病预警。

## 📊 核心特性

### 🧠 ECG脆性分析 (`Agent2_ECG_Brittleness_Analyzer.py`)
- **混沌动力学指标**: Lyapunov指数、近似熵、Hurst指数、样本熵
- **心率变异性分析**: RMSSD、pNN50、SDNN时域指标
- **QT变异性评估**: 复极化不稳定性分析
- **脆性分型系统**: I-V型ECG脆性分类 (正常稳定→极度危险)
- **风险评估**: 心脏猝死风险预测

### 📈 ECG智能分段 (`ECG_Segmentation_Analyzer.py`)
- **病理生理分段**: 基于心电活动变化点的智能分段
- **临床事件分段**: 心律失常和心肌缺血事件检测
- **治疗反应分段**: 药物治疗效果监测
- **多模式分析**: 自动、病理生理、临床事件、治疗反应模式

## 🏥 临床应用场景

### 1. 心脏猝死预警
- **实时监测**: 连续ECG信号脆性评估
- **风险分层**: I-V型脆性分类对应不同风险等级
- **预警系统**: 基于混沌动力学的早期预警

### 2. 心律失常监测
- **房颤检测**: RR间期不规律性分析
- **室性心律失常**: 心率突然加速检测
- **事件分段**: 心律失常发作和恢复的智能分段

### 3. 心肌梗死动态监测
- **ST段分析**: ST抬高/压低检测
- **梗死演变**: 超急性期→急性期→慢性期分段
- **再灌注评估**: 治疗效果动态监测

### 4. 抗心律失常药物疗效
- **药物反应**: 治疗前后脆性变化
- **最佳剂量**: 基于脆性改善的剂量优化
- **副作用监测**: 致心律失常效应检测

## 💻 使用方法

### ECG脆性分析
```python
from Agent2_ECG_Brittleness_Analyzer import analyze_ecg_brittleness
import numpy as np

# 加载ECG数据 (示例)
ecg_data = np.array([...])  # ECG信号数组
sampling_rate = 500  # Hz

# 执行脆性分析
result = analyze_ecg_brittleness(ecg_data, "Patient_001", sampling_rate)

# 查看结果
print(f"脆性分型: {result['ECG脆性评估']['脆性分型']}")
print(f"风险等级: {result['ECG脆性评估']['风险等级']}")
```

### ECG智能分段
```python
from ECG_Segmentation_Analyzer import analyze_ecg_segmentation

# 智能分段分析
result = analyze_ecg_segmentation(ecg_data, "Patient_001", "auto", sampling_rate)

# 查看分段结果
segments = result['智能分段结果']['分段详情']
for segment in segments:
    print(f"第{segment['段落编号']}段: {segment['开始时间']} - {segment['结束时间']}")
```

## 📈 脆性分型系统

| 分型 | 脆性类型 | 风险等级 | 临床特征 | 建议措施 |
|------|----------|----------|----------|----------|
| **I型** | 正常稳定型 | 🟢 低风险 | 心律规整，变异性正常 | 定期监测 |
| **II型** | 轻度不稳定型 | 🟡 中低风险 | 偶发早搏，轻度变异 | 生活方式调整 |
| **III型** | 中度易损型 | 🟠 中等风险 | 频发异位搏动，ST不稳定 | 进一步检查 |
| **IV型** | 重度脆弱型 | 🔴 高风险 | 室性心律失常，QT离散大 | 专科会诊 |
| **V型** | 极度危险型 | 🔴 极高风险 | 恶性心律失常，猝死高危 | 紧急干预 |

## 🔬 技术特点

### 混沌动力学分析优势
- **Lyapunov指数**: 心律失常预测的经典指标
- **分形维数**: 心房颤动检测的有效方法  
- **近似熵**: 心脏猝死风险评估的重要参数
- **Hurst指数**: 心率变异性长程相关性分析

### 多导联融合分析
- **12导联支持**: I, II, III, aVR, aVL, aVF, V1-V6
- **区域化评估**: 前壁、侧壁、下壁、后壁脆性
- **全心整合**: 综合多导联信息的全心脆性评估

### 实时处理能力
- **高频采样**: 支持250-1000Hz采样率
- **在线分析**: 实时脆性评估和预警
- **低延迟**: 适合ICU和CCU实时监护

## 📊 输出报告格式

### 脆性分析报告
```json
{
  "报告头信息": {
    "报告类型": "ECG脆性分析报告 v1.0",
    "患者ID": "Patient_001",
    "分析时间": "2025-08-28 18:00:00"
  },
  "ECG脆性评估": {
    "脆性分型": "III型中度易损型",
    "脆性评分": "65.5/100",
    "风险等级": "🟠 中等风险",
    "混沌动力学指标": {...},
    "心率变异性": {...},
    "临床解读": "中度心电不稳定..."
  }
}
```

### 智能分段报告
```json
{
  "智能分段结果": {
    "分段模式": "病理生理分段",
    "分段数量": 4,
    "分段详情": [
      {
        "段落编号": 1,
        "开始时间": "0.0秒",
        "结束时间": "180.0秒", 
        "段落特征": {
          "平均心率": "75.2 bpm",
          "节律规整性": "规整"
        }
      }
    ]
  }
}
```

## ⚠️ 使用注意事项

1. **数据质量**: 确保ECG信号质量良好，采样率不低于250Hz
2. **临床结合**: 分析结果需结合临床症状和体征综合判断
3. **专业解读**: 建议由心电图专家解读复杂病例
4. **实时监测**: 危险分型需要密切监测和及时干预

## 🔧 技术要求
- Python 3.8+
- numpy, scipy, pandas
- 推荐内存: 4GB+ (处理长时间ECG数据)
- CPU: 支持多核处理 (加速混沌动力学计算)

## 📞 技术支持
如有技术问题或需要定制化开发，请联系AGPAI技术团队。

---
**Agent2-ECG脆性分析系统 v1.0** - 基于混沌动力学的心血管智能分析平台