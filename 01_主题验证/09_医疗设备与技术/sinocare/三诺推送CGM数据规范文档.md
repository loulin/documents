文档名称：三诺IoT云平台数据推送第三方接口规范文档



<a name="_toc325105302"></a><a name="_toc325105210"></a><a name="_toc325105551"></a>**三诺推送CGM数据规范文档**















**三诺生物传感股份有限公司**

**2024年2月21日 长沙**

**法律说明**

版权归三诺生物传感股份有限公司。 

本文档包含的所有内容除特别声明之外，版权均属于三诺生物传感股份有限公司所有，三诺生物传感股份有限公司可在不作任何申明的情况下对本文档内容进行修改。

本文档中所使用的商标所有权属于该商标的所有者。


1. # <a name="_toc148521519"></a>**第三方接口**
   1. ## <a name="_toc148521520"></a><a name="ole_link12"></a>**推送数据接收接口**
      **接口描述**

1) 描述：通过此接口第三方平台及时获取设备上传的检测数据等
1) 接口方式：http（post）
1) 发起端: 三诺系统
1) 接收方：第三方服务器固定地址 

三诺系统在接收到设备上传的数据即时通过接口通知第三方接收服务器，第三方服务器在正确接收到三诺系统发过来的数据后返回数据接收成功的状态，三诺系统在5s内未接收到到接收成功的状态或者返回接收失败的状态，会根据一定的的策略进行重发。

**时序图**

无。

**http header**

**Content-type: application/json**

**参数：**

|<p><a name="ole_link6"></a><a name="ole_link5"></a>{</p><p>`	`"data": {</p><p>	</p><p>`	`},</p><p>`	`"reservedCode": "01"</p><p>}</p>|||||
| :- | :- | :- | :- | :- |
|<a name="ole_link3"></a><a name="ole_link4"></a>**参数名称**|**类型**|**父类**|**参数含义**|**备注**|
|reservedCode|字符串（2）||接口命令|01-cgm检测数据推送|
|data|对象||数据消息主体|数据体结构中根据reservedCode字段判断不同接口命令解析，详情参考1.2|

<a name="_toc325105212"></a><a name="_toc325105304"></a><a name="_toc325105553"></a>**返回JSON**

|<p><a name="ole_link1"></a><a name="ole_link2"></a>{</p><p>`	`"code":0, //0-调用成功，其他见错误码列表</p><p>`	`"msg":"",//状态描述信息，其他见错误列表描述信息</p><p>}</p>||||
| :- | :- | :- | :- |
|**参数名称**|**类型**|**参数含义**|**备注**|
|code|数字(10)|状态码详见附件|不可为空|
|msg|字符串|错误描述|不可为空|

**错误**

无。


1. ## <a name="_toc148521521"></a>**data数据对象说明**
   data中的数据字段结构会根据reservedCode接口命令不同而不同，请根据不同的reservedCode接口命令解析data中的数据结构内容。 
   ### <a name="_toc148521522"></a>**1.2.1检测数据推送**

   |<p>{</p><p>`		`"testId": "23434335345",</p><p>`		`"deviceSn": "23xxdrt33",</p><p>`		`"testResult": "5.6",</p><p>`		`"serialNo": 1,</p><p>`		`"testTime": "2021-11-02 12:33:33",</p><p>"idCard": "430424",</p><p>"visitId": "1234321",</p><p>"patientName": "张三",</p><p>"customerName": "测试医院",</p><p>"patientId": "12",</p><p>"inSerialId": "12343211",</p><p>"status": "1",</p><p>"cgmDay": 8,</p><p>"increMinute": 3,</p><p>"low": null,</p><p>"high": null,</p><p>"cgmStatus": "2"</p><p>}</p>|||||
   | :- | :- | :- | :- | :- |
   |**参数名称**|**类型**|**父类**|**参数含义**|**备注**|
   |testId|字符串|data|检测数据唯一id||
   |deviceSn|字符串|data|设备sn号||
   |testResult|字符串|data|检测结果值||
   |serialNo|数字 (10)|data|序列号,出的第一个值为1，后面累加1||
   |increMinute|数字 (10)|data|出值的间隔,单位：分钟||
   |cgmDay|数字 (10)|data|设备最大使用天数（固定）  单位：天||
   |idCard|字符串|data|身份证号||
   |testTime|字符串|data|检测时间|日期格式:yyyy-MM-dd HH:mm:ss|
   |visitId|字符串|data|住院号||
   |patientName|字符串|data|患者信息||
   |customerName|字符串|data|医院名称||
   |patientId|字符串|data|患者主索引ID||
   |inSerialId|字符串|data|患者住院流水号||
   |status|字符串|data|0：有效  1：无效|传感器初始化阶段产生的数值状态为1|
   |cgmStatus|字符串|data|cgm接入后状态 0：待植入 1：初始化中 2：上传中 4：已完成|传感器最新的状态|
   |low|数字 (10)|data|低阈值||
   |high|数字 (10)|data|高阈值||



1. # <a name="_toc148521524"></a>**附件列表**


## <a name="_toc148521525"></a>**2.1状态码列表**

|**状态码**|**状态码描述**|
| :-: | :-: |
|0|**成功,接收数据后返回此状态码表示成功,否则会根据一定的策略进行重推**|


## <a name="_toc148521526"></a>**2.2 接口命令reservedCode列表**

|**状态码**|**描述**|
| :-: | :-: |
|01|接口命令（01-cgm检测数据推送）|

三诺系统只对已配置的接口地址发请求。第三方服务器接收到数据，先解析出不同命令字，然后根据不同命令做不同的解析数据处理。

## <a name="_toc148521527"></a>**2.3 接收数据防重复校验**
三诺系统在推送数据给第三方服务器时并不保证只推送一次，会根据一定的策略重推，所以第三方服务器系统有可能接收到重复的数据，建议在接收数据的接口上做数据重复校验的逻辑，如果接收到的数据已经在自己系统中存在，则直接返回{"code":0,"msg":""}

三诺生物传感股份有限公司                            4
