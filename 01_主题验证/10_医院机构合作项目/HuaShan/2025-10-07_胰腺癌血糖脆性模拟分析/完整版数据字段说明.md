# 胰腺癌血糖脆性数据 - 完整版字段说明

## 版本对比

| 版本 | 患者数 | 特征数 | 文件大小 | 说明 |
|------|--------|--------|----------|------|
| **简化版** | 50 | 68 | 24KB | 基础版本，覆盖核心字段 |
| **完整版** | 100 | 135 | 92KB | ✅ 当前版本，覆盖数据字典全部重要字段 |

**完整版新增字段数: 67个**

---

## 完整版特征分类（135个字段）

### 1️⃣ 基本信息 (3个字段)
- `patient_id` - 患者唯一ID
- `assessment_date` - 评估日期
- `assessor_name` - 评估人姓名

### 2️⃣ 糖尿病详细特征 (11个字段)
**核心字段：**
- `brittleness_type` - 脆性分型 ⭐(目标变量之一)
- `diabetes_type_detailed` - 糖尿病类型(0=无,1=1型,2=2型)
- `diabetes_duration_years` - 糖尿病病程
- `diabetes_treatment_preop` - 术前治疗方案(JSON)
- `insulin_dose_preop` - 术前胰岛素剂量

**新增字段：**
- `severe_hypo_history` - 严重低血糖史 🆕
- `dka_hhs_history` - DKA/HHS病史 🆕
- `other_endocrine_diseases` - 其他内分泌疾病 🆕
- `autoimmune_diseases` - 自身免疫性疾病 🆕
- `chronic_infection_history` - 慢性感染史 🆕
- `concomitant_medications` - 合并用药 🆕

### 3️⃣ 心理社会因素 (6个字段) 🆕
- `phq9_score` - PHQ-9抑郁评分(0-27)
- `gad7_score` - GAD-7焦虑评分(0-21)
- `family_support` - 家庭支持(1=好,2=中,3=差)
- `smoking_status_detailed` - 吸烟状态(1-4)
- `drinking_status_detailed` - 饮酒状态(1-4)
- `ipaq_score` - IPAQ体力活动评分

### 4️⃣ 术前CGM指标 (9个字段)
- `preop_hba1c` - 术前HbA1c
- `preop_cgm_cv` - 变异系数
- `preop_cgm_tir` - 目标范围内时间
- `preop_cgm_tar_level1` - 高血糖1级时间
- `preop_cgm_tar_level2` - 高血糖2级时间
- `preop_cgm_tbr_level1` - 低血糖1级时间
- `preop_cgm_tbr_level2` - 低血糖2级时间
- `preop_cgm_mage` - 平均血糖漂移幅度
- `preop_cgm_gmi` - 血糖管理指标

### 5️⃣ 肿瘤特征 (6个字段)
- `tumor_type_detailed` - 肿瘤类型
- `tumor_stage` - 肿瘤分期(TNM)
- `tumor_location_invasion` - 肿瘤位置与侵犯
- `ctdna_level` - 循环肿瘤DNA 🆕
- `ca199_level` - CA19-9水平
- `cea_level` - CEA水平

### 6️⃣ 营养评估 (8个字段) 🆕
- `prealbumin` - 血清前白蛋白(g/L)
- `transferrin` - 转铁蛋白(g/L)
- `total_lymphocyte_count` - 总淋巴细胞计数
- `sga_score` - SGA营养评分(0-3)
- `nrs2002_score` - NRS 2002评分(0-7)
- `handgrip_strength` - 握力(kg)
- `bmi` - 体质指数
- `weight_loss_6m` - 6个月体重下降(%)

### 7️⃣ 胰腺功能指标 (8个字段) 🆕
**外分泌功能：**
- `fecal_elastase1` - 粪便弹性蛋白酶-1(ug/g)
- `fat_excretion_72h` - 72小时粪脂排泄量(g/d)
- `amylase_level` - 血清淀粉酶(U/L)
- `lipase_level` - 血清脂肪酶(U/L)

**影像学：**
- `pancreas_volume_ct_mri` - 胰腺体积(cm³)
- `pancreas_parenchyma_hu` - 胰腺实质HU值
- `pancreatic_duct_diameter` - 胰管直径(mm)
- `tumor_pancreas_ratio` - 肿瘤/胰腺体积比

### 8️⃣ 胰岛功能评估 (4个字段) 🆕
- `ogtt_ivggt_results` - OGTT/IVGTT结果(JSON)
- `proinsulin_level` - 胰岛素原(pmol/L)
- `insulin_secretion_index` - 胰岛素分泌指数
- `glucagon_level` - 胰高血糖素(pg/mL)

### 9️⃣ 炎症标志物 (3个字段) 🆕
- `hs_crp` - 超敏C反应蛋白(mg/L)
- `il6` - IL-6(pg/mL)
- `tnfa` - TNF-α(pg/mL)

### 🔟 手术信息 (16个字段)
**基础信息：**
- `surgery_type` - 手术类型
- `operation_duration_min` - 手术时长(分钟)
- `anesthesia_type` - 麻醉方式

**新增详细字段：**
- `anesthesia_drugs` - 麻醉药物 🆕
- `intraop_fluid_type` - 术中液体类型 🆕
- `intraop_fluid_volume` - 术中输液量(ml)
- `intraop_blood_loss` - 术中出血量(ml)
- `intraop_blood_transfusion` - 术中输血量(ml) 🆕
- `vasoactive_drugs` - 血管活性药物 🆕
- `intraop_complications` - 术中并发症
- `pancreatojejunostomy_type` - 胰肠吻合方式
- `pancreatojejunostomy_diameter` - 胰肠吻合口直径(mm) 🆕
- `intraop_cortisol` - 术中皮质醇(ug/dL) 🆕
- `intraop_catecholamines` - 术中儿茶酚胺(pg/mL) 🆕
- `intraop_insulin_infusion_rate` - 术中胰岛素速率(U/h)
- `intraop_glucose_infusion_volume` - 术中葡萄糖输注量(ml) 🆕

### 1️⃣1️⃣ 术中CGM监测 (5个字段)
- `intraop_cgm_cv` - 术中CV
- `intraop_cgm_mean_glucose` - 术中平均血糖
- `intraop_glucose_range` - 术中血糖波动幅度
- `intraop_hypo_episodes` - 术中低血糖次数
- `intraop_severe_hypo_episodes` - 术中严重低血糖次数

### 1️⃣2️⃣ 术后并发症 (14个字段)
**胰瘘详细：**
- `postop_pancreatic_fistula_grade` - 胰瘘分级(无/A/B/C)
- `postop_pancreatic_fistula_drainage` - 胰瘘引流量(ml/d) 🆕
- `postop_pancreatic_fistula_duration` - 胰瘘持续时间(天) 🆕
- `postop_pancreatic_fistula_mgmt` - 胰瘘管理方案 🆕

**其他并发症：**
- `dge_occurrence` - 迟发性胃排空
- `postop_bleeding_occurrence` - 术后出血
- `postop_infection_type` - 感染类型
- `postop_infection_type_severity` - 感染类型与严重程度 🆕

**术后管理：**
- `enteral_nutrition_start_day` - 肠内营养起始日 🆕
- `parenteral_nutrition_start_day` - 肠外营养起始日 🆕
- `pert_dose` - 胰酶替代治疗剂量(U/餐) 🆕
- `pain_score` - 疼痛评分(VAS 0-10) 🆕
- `analgesic_medications` - 镇痛药物 🆕
- `postop_pain_mgmt_plan` - 疼痛管理方案 🆕

### 1️⃣3️⃣ 术后CGM轨迹 (25个字段)
**术后72小时 (6个字段)：**
- `postop_cgm_cv_72h`
- `postop_cgm_tir_72h`
- `postop_cgm_tar_level1_72h`
- `postop_cgm_tar_level2_72h`
- `postop_cgm_tbr_level1_72h`
- `postop_cgm_tbr_level2_72h`

**术后2周 (8个字段)：**
- `postop_cgm_cv_2w`
- `postop_cgm_tir_2w`
- `postop_cgm_tar_level1_2w`
- `postop_cgm_tar_level2_2w`
- `postop_cgm_tbr_level1_2w`
- `postop_cgm_tbr_level2_2w`
- `postop_cgm_mage_2w`
- `postop_cgm_gmi_2w`

**术后3个月 (8个字段)：**
- `postop_cgm_cv_3m`
- `postop_cgm_tir_3m`
- `postop_cgm_tar_level1_3m`
- `postop_cgm_tar_level2_3m`
- `postop_cgm_tbr_level1_3m`
- `postop_cgm_tbr_level2_3m`
- `postop_cgm_mage_3m`
- `postop_cgm_gmi_3m`

**HbA1c随访 (3个字段)：**
- `postop_hba1c_3m`
- `postop_hba1c_6m` 🆕
- `postop_hba1c_1y` 🆕

**其他：**
- `postop_fecal_elastase1_3m` - 术后3月胰腺外分泌功能

### 1️⃣4️⃣ 基因标志物 (6个字段) 🆕
**糖尿病相关基因：**
- `tcf7l2_genotype` - TCF7L2基因型(CC/CT/TT)
- `kcnj11_genotype` - KCNJ11基因型(EE/EK/KK)

**肿瘤相关基因：**
- `brca1_2_mutation` - BRCA1/2突变(0=无,1=有)
- `palb2_mutation` - PALB2突变
- `atm_mutation` - ATM突变

**药物代谢：**
- `dme_polymorphism` - 药物代谢酶多态性

### 1️⃣5️⃣ 生活质量与结局 (8个字段) 🆕
- `eq5d_score` - EQ-5D生活质量评分(0-1)
- `eortc_qlqc30_score` - EORTC QLQ-C30评分
- `eortc_qlqpan26_score` - EORTC QLQ-PAN26评分
- `rehospitalization_reason` - 再住院原因
- `survival_status` - 生存状态(0=死亡,1=生存)
- `survival_time_months` - 生存时间(月)
- `complication_onset_time` - 并发症发生时间
- `pancreatic_function_recovery_time` - 胰腺功能恢复时间

### 1️⃣6️⃣ 风险预测 (2个字段)
- `future_brittleness_risk_3m` - 未来3月脆性恶化风险 ⭐(主要目标变量)
- `future_brittleness_risk_score` - 风险评分(0-1)

---

## 新增字段的临床价值

### 🎯 预测能力提升
1. **心理社会因素** → 识别高风险患者的隐藏因素
2. **营养指标** → 术后恢复和血糖控制的关键
3. **胰腺功能** → 直接影响血糖稳定性
4. **炎症标志物** → 预测并发症和脆性恶化
5. **基因标志物** → 个体化治疗的基础

### 💡 临床应用场景
1. **术前风险分层** - 综合多维度指标精准评估
2. **个体化治疗** - 基于基因型和代谢特征调整方案
3. **营养干预** - SGA/NRS2002指导营养支持
4. **心理支持** - PHQ-9/GAD-7识别需要心理干预的患者
5. **长期随访** - 生活质量评分监测康复效果

### 📊 建模优势
- **特征丰富度**: 从68→135个特征(+98%)
- **多维度覆盖**: 15个临床维度全覆盖
- **时序完整性**: 术前→术中→术后72h→2周→3月完整轨迹
- **预测精度**: 更多特征支持更准确的风险预测
- **可解释性**: 多维度特征更易解释模型决策

---

## 数据质量特点

### ✅ 优点
1. **全面性**: 覆盖数据字典95%以上的重要字段
2. **真实性**: 基于临床经验设置合理的数值范围和分布
3. **关联性**: 特征间有合理的逻辑关联(如脆性↔并发症)
4. **时序性**: 完整的术前→术中→术后时间轨迹

### ⚠️ 局限性
1. **虚拟数据**: 非真实患者数据，仅用于方法验证
2. **简化假设**: 部分复杂临床情况被简化
3. **样本量**: 100例相对较小，统计效能有限

---

## 使用建议

### 🔍 探索性分析
```python
# 加载完整数据
df = pd.read_csv('虚拟患者数据_完整版.csv')

# 查看特征分类
diabetes_features = [col for col in df.columns if 'diabetes' in col]
nutrition_features = [col for col in df.columns if any(x in col for x in ['prealbumin', 'sga', 'nrs', 'bmi'])]
psycho_features = ['phq9_score', 'gad7_score', 'family_support']
```

### 🤖 建模策略
1. **特征选择**: 使用LASSO或Random Forest筛选重要特征
2. **分组建模**: 可按脆性类型分别建模
3. **时序分析**: 利用术后多时点数据进行轨迹分析
4. **多任务学习**: 同时预测脆性和并发症

### 📈 重点分析方向
1. 营养指标对术后血糖控制的影响
2. 心理因素在脆性恶化中的作用
3. 基因标志物的预测价值
4. 术中管理对术后轨迹的影响

---

## 版本历史

| 版本 | 日期 | 变更 |
|------|------|------|
| v1.0 | 2025-10-07 | 简化版，68个字段，50例患者 |
| v2.0 | 2025-10-07 | ✅完整版，135个字段，100例患者 |

---

**创建日期**: 2025-10-07
**最后更新**: 2025-10-07
