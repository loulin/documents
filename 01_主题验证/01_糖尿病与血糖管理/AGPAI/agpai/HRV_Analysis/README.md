# HRV心率变异性脆性分析系统

## 💓 系统概述  
基于Agent2 v5.0血糖脆性分析架构开发的HRV脆性分析系统，专门用于心率变异性的脆性评估、智能分段和自主神经功能分析。

## 📊 核心特性

### 🧠 HRV脆性分析 (`Agent2_HRV_Brittleness_Analyzer.py`)
- **时域HRV指标**: RMSSD、pNN50、SDNN、SDANN
- **频域HRV指标**: LF、HF、LF/HF比值、总功率
- **混沌动力学指标**: Lyapunov指数、近似熵、Hurst指数、样本熵
- **Poincare分析**: SD1、SD2、SD1/SD2比值
- **脆性分型系统**: I-V型HRV脆性分类 (正常调节→极度刚性)
- **自主神经平衡**: 交感/副交感神经功能评估

### 📈 HRV智能分段 (`HRV_Segmentation_Analyzer.py`)
- **训练阶段分段**: 热身→主训练→恢复阶段智能识别
- **恢复监测分段**: 即时恢复→快速恢复→慢速恢复→稳定期
- **昼夜节律分段**: 24小时自主神经活动变化分析
- **自主神经平衡分段**: 交感/副交感优势期识别

## 🏥 临床应用场景

### 1. 运动医学应用
- **运动员监测**: 训练适应性和疲劳状态评估
- **训练处方**: 基于HRV的个性化训练强度制定
- **过训练预防**: 早期识别过训练综合征风险
- **恢复监测**: 运动后恢复质量实时评估

### 2. 心脏康复应用
- **康复分期**: 心脏康复不同阶段的自主神经恢复评估
- **运动耐量**: 基于HRV的安全运动强度确定
- **预后评估**: 自主神经功能恢复预测康复效果
- **个体化方案**: 根据HRV特征制定个性化康复计划

### 3. 应激评估应用
- **工作压力**: 职场压力对自主神经系统的影响
- **心理应激**: 焦虑、抑郁等心理状态的生理指标
- **睡眠质量**: 通过夜间HRV评估睡眠质量
- **生活方式**: 饮食、运动、作息对自主神经的影响

### 4. 临床监测应用
- **糖尿病并发症**: 糖尿病自主神经病变早期筛查
- **心血管风险**: 基于HRV的心血管事件风险预测
- **药物监测**: 药物对自主神经系统的影响评估
- **术后监测**: 手术后自主神经功能恢复监测

## 💻 使用方法

### HRV脆性分析
```python
from Agent2_HRV_Brittleness_Analyzer import analyze_hrv_brittleness
import numpy as np

# RR间期数据 (单位: ms)
rr_intervals = np.array([800, 820, 785, 795, 810, ...])

# 执行脆性分析
result = analyze_hrv_brittleness(rr_intervals, "Patient_001")

# 查看结果
print(f"脆性分型: {result['HRV脆性评估']['脆性分型']}")
print(f"自主神经平衡: {result['HRV脆性评估']['自主神经平衡']}")
```

### HRV智能分段
```python
from HRV_Segmentation_Analyzer import analyze_hrv_segmentation

# 训练监测分析
result = analyze_hrv_segmentation(
    rr_intervals, 
    "Athlete_001", 
    "training_phases",
    "运动员间歇训练监测"
)

# 查看训练阶段
segments = result['智能分段结果']['分段详情']
for segment in segments:
    print(f"{segment['阶段名称']}: {segment['训练特征']['训练强度']}")
```

## 📈 脆性分型系统

| 分型 | 脆性类型 | 风险等级 | RMSSD范围 | 临床特征 | 应用建议 |
|------|----------|----------|-----------|----------|----------|
| **I型** | 正常调节型 | 🟢 低风险 | >50ms | 自主神经功能正常 | 维持现状 |
| **II型** | 轻度失调型 | 🟡 中低风险 | 30-50ms | 轻度功能下降 | 生活方式干预 |
| **III型** | 中度失调型 | 🟠 中等风险 | 20-30ms | 明显功能异常 | 专业评估 |
| **IV型** | 重度失调型 | 🔴 高风险 | 10-20ms | 严重功能失调 | 医疗干预 |
| **V型** | 极度刚性型 | 🔴 极高风险 | <10ms | 功能几乎丧失 | 紧急处理 |

## 🏃‍♂️ 训练应用案例

### 运动员训练监测
```python
# 训练阶段HRV特征对比
训练阶段对比 = {
    "热身阶段": {
        "平均心率": "70-85 bpm",
        "RMSSD": ">40ms",
        "自主神经": "副交感主导→平衡"
    },
    "主训练阶段": {
        "平均心率": "120-160 bpm", 
        "RMSSD": "10-25ms",
        "自主神经": "交感神经主导"
    },
    "恢复阶段": {
        "平均心率": "90→70 bpm",
        "RMSSD": "15→50ms",
        "自主神经": "交感→副交感恢复"
    }
}
```

### 疲劳状态识别
- **正常状态**: 晨起RMSSD>50ms，LF/HF<2.5
- **轻度疲劳**: 晨起RMSSD 30-50ms，心率略升
- **中度疲劳**: 晨起RMSSD<30ms，LF/HF>3.0
- **重度疲劳**: RMSSD<20ms，心率持续升高

## 🔬 技术特点

### 混沌动力学分析
- **Lyapunov指数**: 评估HRV系统的混沌特性
- **Hurst指数**: 分析心率长程相关性和记忆特性  
- **近似熵/样本熵**: 量化心率模式的复杂性和规律性
- **分形分析**: 评估自主神经调节的分形特征

### 多尺度分析
- **超短期HRV**: 1-5分钟分析，适合实时监测
- **短期HRV**: 5-15分钟分析，标准临床评估
- **长期HRV**: 24小时分析，全面评估昼夜变化
- **超长期HRV**: 多日分析，评估长期趋势

### 自主神经功能评估
- **交感神经活性**: LF功率、LF/HF比值
- **副交感神经活性**: HF功率、RMSSD、pNN50
- **神经平衡状态**: LF/HF比值范围评估
- **调节能力**: 应激反应和恢复能力评估

## 📊 输出报告格式

### HRV脆性分析报告
```json
{
  "HRV脆性评估": {
    "脆性分型": "II型轻度失调型",
    "脆性评分": "32.5/100",
    "风险等级": "🟡 中低风险",
    "自主神经平衡": "交感神经优势",
    "时域HRV指标": {
      "RMSSD": "35.2 ms",
      "pNN50": "12.5%",
      "SDNN": "45.8 ms"
    },
    "频域HRV指标": {
      "LF功率": "234.5 ms²",
      "HF功率": "123.2 ms²", 
      "LF/HF比值": "1.90"
    },
    "临床解读": "轻度自主神经功能失调..."
  }
}
```

### 训练分段分析报告
```json
{
  "智能分段结果": {
    "分段模式": "训练阶段分段",
    "分段数量": 3,
    "分段详情": [
      {
        "阶段名称": "热身阶段",
        "训练特征": {
          "训练强度": "低中强度",
          "心率区间": "脂肪燃烧区",
          "训练适应性": "良好适应性"
        }
      }
    ]
  }
}
```

## 🎯 应用价值

### 运动表现优化
- **训练负荷监控**: 避免过训练，优化训练效果
- **恢复质量评估**: 确保充分恢复，预防运动损伤  
- **个性化训练**: 基于个体HRV特征制定训练方案
- **竞技状态监测**: 评估运动员的最佳竞技状态

### 健康管理应用
- **压力管理**: 识别慢性压力，指导放松训练
- **睡眠优化**: 通过夜间HRV评估和改善睡眠质量
- **生活方式指导**: 评估饮食、运动对自主神经的影响
- **疾病预防**: 早期识别心血管和代谢疾病风险

### 临床诊疗支持
- **病情监测**: 慢性疾病患者的自主神经功能跟踪
- **治疗评效**: 药物和非药物治疗对HRV的改善效果
- **预后判断**: 基于HRV改善预测患者预后
- **康复指导**: 制定个性化的康复训练方案

## ⚠️ 使用注意事项

1. **数据质量**: 确保RR间期数据准确，剔除伪差和异常值
2. **测量条件**: 保持测量环境安静，避免干扰因素
3. **个体差异**: 考虑年龄、性别、健康状态的个体差异
4. **临床结合**: HRV分析结果需结合临床症状综合判断
5. **长期监测**: HRV具有较大的日内和日间变异，建议长期监测

## 🔧 技术要求
- Python 3.8+
- numpy, scipy, pandas
- RR间期数据精度: 1ms
- 最小分析时长: 5分钟 (300个RR间期)
- 推荐分析时长: 24小时 (完整昼夜节律)

## 📞 技术支持
如有技术问题或需要定制化开发，请联系AGPAI技术团队。

---
**Agent2-HRV脆性分析系统 v1.0** - 基于混沌动力学的自主神经智能分析平台