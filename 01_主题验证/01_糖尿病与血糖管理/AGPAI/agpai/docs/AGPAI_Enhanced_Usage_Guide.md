# AGPAIå¢å¼ºç‰ˆæ™ºèƒ½æ ‡æ³¨ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ç³»ç»Ÿæ¦‚è¿°

AGPAIå¢å¼ºç‰ˆæ™ºèƒ½æ ‡æ³¨ç³»ç»Ÿåœ¨åŸæœ‰çš„57ç§è§†è§‰æŒ‡æ ‡åˆ†æåŸºç¡€ä¸Šï¼Œæ–°å¢äº†AGPå›¾è¡¨å’Œæ¯æ—¥è¡€ç³–æ›²çº¿çš„æ™ºèƒ½æ ‡æ³¨åŠŸèƒ½ã€‚ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«ä¸´åºŠæ˜¾è‘—çš„è¡€ç³–æ¨¡å¼ï¼Œå¹¶åœ¨å›¾è¡¨ä¸Šè¿›è¡Œç›´è§‚çš„æ ‡æ³¨å’Œè§£è¯»ã€‚

## ç³»ç»Ÿç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **57ç§è§†è§‰æŒ‡æ ‡åˆ†æ**ï¼šå®Œæ•´çš„AGPæ¨¡å¼è¯†åˆ«
- **æ™ºèƒ½AGPæ ‡æ³¨**ï¼šè‡ªåŠ¨æ ‡æ³¨é»æ˜ç°è±¡ã€é¤åå³°å€¼ã€ç›®æ ‡èŒƒå›´ç­‰
- **æ¯æ—¥æ›²çº¿æ ‡æ³¨**ï¼šæ ‡æ³¨ä½è¡€ç³–ã€é«˜è¡€ç³–ã€æ€¥å‰§å˜åŒ–ç­‰äº‹ä»¶
- **ä¸´åºŠè§£è¯»**ï¼šåŸºäºå¾ªè¯åŒ»å­¦çš„ä¸“ä¸šè§£è¯»
- **å¤šæ ¼å¼è¾“å‡º**ï¼šPNGå›¾è¡¨ã€JSONæŠ¥å‘Šã€è¯¦ç»†åˆ†æ

### ğŸ” æ ‡æ³¨ç±»å‹
- **é»æ˜ç°è±¡æ£€æµ‹**ï¼šå‡Œæ™¨4-8ç‚¹è¡€ç³–å˜åŒ–æ¨¡å¼
- **é¤åè¡€ç³–åˆ†æ**ï¼šä¸‰é¤åè¡€ç³–ååº”è¯„ä¼°  
- **ç›®æ ‡èŒƒå›´è¯„ä¼°**ï¼šTIRã€TARã€TBRåˆ†æ
- **è¡€ç³–å˜å¼‚æ€§**ï¼šCVã€åˆ†ä½æ•°å¸¦å®½ç­‰æŒ‡æ ‡
- **å¤œé—´ç¨³å®šæ€§**ï¼šç¡çœ æœŸé—´è¡€ç³–å¹³ç¨³åº¦
- **å¼‚å¸¸äº‹ä»¶**ï¼šä½è¡€ç³–ã€é«˜è¡€ç³–ã€æ€¥å‰§å˜åŒ–

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿å®‰è£…æ‰€éœ€ä¾èµ–
pip install pandas numpy matplotlib seaborn scipy
```

### 2. åŸºæœ¬ä½¿ç”¨

```python
from AGP_Intelligent_Annotation_System import EnhancedAGPAISystem

# åˆ›å»ºç³»ç»Ÿå®ä¾‹
enhanced_agpai = EnhancedAGPAISystem()

# æ‚£è€…ä¿¡æ¯
patient_info = {
    'name': 'å¼ ä¸‰',
    'age': 45,
    'gender': 'ç”·',
    'diabetes_type': 'T2DM',
    'diabetes_duration': '8å¹´',
    'cgm_device': 'Dexcom G6'
}

# æ‰§è¡Œåˆ†æ
results = enhanced_agpai.comprehensive_analysis_with_annotations(
    cgm_file_path="path/to/your/cgm_data.csv",
    patient_info=patient_info,
    output_dir="./output"
)
```

### 3. è¾“å‡ºæ–‡ä»¶

åˆ†æå®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
- `AGP_æ™ºèƒ½æ ‡æ³¨å›¾è¡¨_YYYYMMDD_HHMMSS.png`
- `æ¯æ—¥è¡€ç³–æ›²çº¿_æ™ºèƒ½æ ‡æ³¨_YYYYMMDD_HHMMSS.png`
- `AGPAI_å®Œæ•´æ™ºèƒ½åˆ†ææŠ¥å‘Š_YYYYMMDD_HHMMSS.json`

## è¯¦ç»†åŠŸèƒ½è¯´æ˜

### AGPå›¾è¡¨æ™ºèƒ½æ ‡æ³¨

#### æ ‡æ³¨å†…å®¹
1. **é»æ˜ç°è±¡æ ‡æ³¨**
   - ä½ç½®ï¼šå‡Œæ™¨4-8ç‚¹è¡€ç³–å³°å€¼å¤„
   - å†…å®¹ï¼šä¸Šå‡é€Ÿç‡ï¼ˆmmol/L/hï¼‰
   - é¢œè‰²ï¼šçº¢è‰²ï¼ˆä¸¥é‡ï¼‰ã€æ©™è‰²ï¼ˆä¸­ç­‰ï¼‰

2. **é¤åå³°å€¼æ ‡æ³¨**
   - ä½ç½®ï¼šæ—©é¤åè¡€ç³–æœ€é«˜ç‚¹
   - å†…å®¹ï¼šå‡é«˜å¹…åº¦ï¼ˆmmol/Lï¼‰
   - é¢œè‰²ï¼šæ ¹æ®ä¸¥é‡ç¨‹åº¦åˆ†çº§

3. **ç›®æ ‡èŒƒå›´æ ‡æ³¨**
   - ä½ç½®ï¼šTIRåä½çš„æ—¶æ®µ
   - å†…å®¹ï¼šTIRç™¾åˆ†æ¯”å’Œåç¦»ç¨‹åº¦
   - é¢œè‰²ï¼šçº¢è‰²æˆ–æ©™è‰²è­¦ç¤º

4. **å¤œé—´ç¨³å®šæ€§æ ‡æ³¨**
   - ä½ç½®ï¼šå¤œé—´ä¸ç¨³å®šæ—¶æ®µ
   - å†…å®¹ï¼šå¹³å¦åº¦æŒ‡æ•°
   - é¢œè‰²ï¼šæ©™è‰²æé†’

5. **è¡€ç³–å˜å¼‚æ€§æ ‡æ³¨**
   - ä½ç½®ï¼šå˜å¼‚æœ€å¤§çš„æ—¶æ®µ
   - å†…å®¹ï¼šå˜å¼‚ç³»æ•°ï¼ˆCV%ï¼‰
   - é¢œè‰²ï¼šæ ¹æ®ä¸¥é‡ç¨‹åº¦

#### å›¾è¡¨ç‰¹æ€§
- **åˆ†ä½æ•°å¸¦æ˜¾ç¤º**ï¼š5%-95%å’Œ25%-75%åˆ†ä½æ•°
- **ç›®æ ‡èŒƒå›´èƒŒæ™¯**ï¼š3.9-10.0 mmol/Lç»¿è‰²åŒºåŸŸ
- **å±é™©åŒºåŸŸ**ï¼š<3.0å’Œ>13.9 mmol/Lçº¢è‰²èƒŒæ™¯
- **å…³é”®æŒ‡æ ‡æ¡†**ï¼šTIRã€CVã€å¹³æ»‘åº¦ç­‰æŒ‡æ ‡
- **æ—¶é—´è½´æ ‡ç­¾**ï¼š24å°æ—¶æ ¼å¼ï¼Œ2å°æ—¶é—´éš”

### æ¯æ—¥è¡€ç³–æ›²çº¿æ ‡æ³¨

#### æ ‡æ³¨äº‹ä»¶
1. **é¤åå³°å€¼**
   - æ£€æµ‹ï¼šé¤å2å°æ—¶å†…è¡€ç³–å‡é«˜>3.0 mmol/L
   - æ ‡æ³¨ï¼š"+X.X mmol/L"ï¼Œé¢œè‰²åˆ†çº§
   - ä½ç½®ï¼šå³°å€¼ç‚¹ä¸Šæ–¹

2. **ä½è¡€ç³–äº‹ä»¶**
   - æ£€æµ‹ï¼šè¡€ç³–<3.9 mmol/L
   - æ ‡æ³¨ï¼š"ä½è¡€ç³– X.X"
   - é¢œè‰²ï¼šçº¢è‰²è­¦ç¤º

3. **é«˜è¡€ç³–äº‹ä»¶**
   - æ£€æµ‹ï¼šè¡€ç³–>13.9 mmol/L
   - æ ‡æ³¨ï¼š"é«˜è¡€ç³– X.X"
   - é¢œè‰²ï¼šæ·±çº¢è‰²è­¦ç¤º

4. **æ€¥å‰§å˜åŒ–**
   - æ£€æµ‹ï¼šå˜åŒ–é€Ÿç‡>5æˆ–<-3 mmol/L/h
   - æ ‡æ³¨ï¼š"æ€¥å‡"æˆ–"æ€¥é™"
   - é¢œè‰²ï¼šæ©™è‰²æˆ–è“è‰²

#### å›¾è¡¨ç‰¹æ€§
- **é¤æ—¶æ ‡è®°**ï¼šæ—©é¤ã€åˆé¤ã€æ™šé¤æ—¶æ®µèƒŒæ™¯
- **ç›®æ ‡èŒƒå›´**ï¼š3.9-10.0 mmol/Lå‚è€ƒçº¿
- **è¿ç»­æ˜¾ç¤º**ï¼š7å¤©æ›²çº¿å‚ç›´æ’åˆ—
- **æ—¶é—´è½´**ï¼š24å°æ—¶ï¼Œ4å°æ—¶é—´éš”æ ‡è®°

## é«˜çº§ä½¿ç”¨

### è‡ªå®šä¹‰æ ‡æ³¨è§„åˆ™

```python
# åˆ›å»ºè‡ªå®šä¹‰æ ‡æ³¨å¼•æ“
from AGP_Intelligent_Annotation_System import AGPAnnotationEngine

annotator = AGPAnnotationEngine()

# ä¿®æ”¹æ ‡æ³¨é˜ˆå€¼
custom_thresholds = {
    'dawn_slope_threshold': 0.3,  # é™ä½é»æ˜ç°è±¡æ£€æµ‹é˜ˆå€¼
    'postprandial_threshold': 2.5,  # è°ƒæ•´é¤åå³°å€¼é˜ˆå€¼
    'tir_target': 75  # æé«˜TIRç›®æ ‡
}

# åº”ç”¨è‡ªå®šä¹‰è§„åˆ™ï¼ˆéœ€è¦ä¿®æ”¹æºç ï¼‰
```

### æ‰¹é‡å¤„ç†

```python
import os
from pathlib import Path

# æ‰¹é‡å¤„ç†å¤šä¸ªCGMæ–‡ä»¶
cgm_files = Path("./cgm_data").glob("*.csv")

for cgm_file in cgm_files:
    patient_name = cgm_file.stem
    patient_info = {'name': patient_name}
    
    results = enhanced_agpai.comprehensive_analysis_with_annotations(
        cgm_file_path=str(cgm_file),
        patient_info=patient_info,
        output_dir=f"./output/{patient_name}"
    )
    print(f"å®Œæˆ {patient_name} çš„åˆ†æ")
```

### ç»“æœæ•°æ®æå–

```python
# æå–åˆ†æç»“æœ
analysis_data = results['analysis_results']
report_data = results['intelligent_report']

# å…³é”®æŒ‡æ ‡
tir = analysis_data.get('target_range_coverage', 0)
cv = analysis_data.get('glucose_coefficient_of_variation', 0)
smoothness = analysis_data.get('median_curve_smoothness', 0)

print(f"TIR: {tir:.1f}%")
print(f"CV: {cv:.1f}%")
print(f"å¹³æ»‘åº¦: {smoothness:.3f}")

# ä¸´åºŠå‘ç°
findings = report_data['key_findings']
for finding in findings:
    print(f"å‘ç°: {finding['description']}")
    print(f"æ„ä¹‰: {finding['clinical_significance']}")
```

## CGMæ•°æ®æ ¼å¼è¦æ±‚

### æ”¯æŒçš„æ ¼å¼

1. **Dexcomæ ¼å¼**
   ```csv
   Timestamp (YYYY-MM-DDTHH:MM:SS),Glucose Value (mg/dL)
   2024-01-01T00:00:00,120
   2024-01-01T00:15:00,115
   ```

2. **FreeStyleæ ¼å¼**
   ```csv
   æ—¶é—´,è¡€ç³–å€¼
   2024/01/01 00:00,6.7
   2024/01/01 00:15,6.4
   ```

3. **é€šç”¨CSVæ ¼å¼**
   ```csv
   timestamp,glucose
   2024-01-01 00:00:00,6.7
   2024-01-01 00:15:00,6.4
   ```

4. **Tabåˆ†éš”æ ¼å¼ï¼ˆR002 V5.txtæ ·å¼ï¼‰**
   ```
   ID	æ—¶é—´	è®°å½•ç±»å‹	è‘¡è„ç³–å†å²è®°å½•ï¼ˆmmol/Lï¼‰
   001	2024/01/01 00:00	å†å²è®°å½•	6.7
   001	2024/01/01 00:15	å†å²è®°å½•	6.4
   ```

### æ•°æ®è´¨é‡è¦æ±‚

- **æœ€å°‘æ•°æ®é‡**ï¼š14å¤©ï¼Œæ¯å¤©â‰¥20ä¸ªæ•°æ®ç‚¹
- **æ•°æ®å®Œæ•´æ€§**ï¼šâ‰¥70%æ•°æ®å¯ç”¨
- **æ—¶é—´èŒƒå›´**ï¼šè¿ç»­çš„æ—¶é—´åºåˆ—
- **è¡€ç³–å•ä½**ï¼šmmol/Lï¼ˆè‡ªåŠ¨è½¬æ¢mg/dLï¼‰

## è¾“å‡ºè§£è¯»

### AGPå›¾è¡¨è§£è¯»

1. **æŸ¥çœ‹æ ‡æ³¨ä¼˜å…ˆçº§**
   - ğŸ”´ çº¢è‰²ï¼šéœ€è¦ç«‹å³å…³æ³¨
   - ğŸŸ¡ æ©™è‰²ï¼šå»ºè®®ä¼˜åŒ–
   - ğŸ”µ è“è‰²ï¼šä¸€èˆ¬æ€§å»ºè®®
   - âœ… ç»¿è‰²ï¼šè¡¨ç°è‰¯å¥½

2. **é‡ç‚¹å…³æ³¨åŒºåŸŸ**
   - å‡Œæ™¨4-8ç‚¹ï¼šé»æ˜ç°è±¡
   - é¤å2å°æ—¶ï¼šè¡€ç³–å³°å€¼
   - å¤œé—´ï¼šè¡€ç³–ç¨³å®šæ€§
   - æ•´ä½“ï¼šç›®æ ‡èŒƒå›´è¦†ç›–

3. **æ›²çº¿å½¢æ€åˆ†æ**
   - å¹³æ»‘åº¦ï¼šè¡€ç³–æ§åˆ¶ç¨³å®šæ€§
   - å¯¹ç§°æ€§ï¼šç”Ÿæ´»è§„å¾‹æ€§
   - åˆ†ä½æ•°å¸¦ï¼šè¡€ç³–å˜å¼‚ç¨‹åº¦

### æ¯æ—¥æ›²çº¿è§£è¯»

1. **äº‹ä»¶è¯†åˆ«**
   - ä½è¡€ç³–ï¼šçº¢è‰²æ ‡æ³¨ï¼Œå…³æ³¨åŸå› 
   - é«˜è¡€ç³–ï¼šæ·±çº¢æ ‡æ³¨ï¼Œè°ƒæ•´æ²»ç–—
   - é¤åå³°å€¼ï¼šè¯„ä¼°é¤æ—¶ç®¡ç†
   - æ€¥å‰§å˜åŒ–ï¼šæŸ¥æ‰¾è¯±å› 

2. **æ¨¡å¼è¯†åˆ«**
   - é¤åååº”ä¸€è‡´æ€§
   - å¤œé—´è¡€ç³–ç¨³å®šæ€§
   - è¿åŠ¨ç­‰ç”Ÿæ´»äº‹ä»¶å½±å“

### æŠ¥å‘Šæ•°æ®è§£è¯»

```json
{
  "overall_assessment": {
    "level": "è‰¯å¥½",
    "overall_score": 75.2,
    "description": "è¡€ç³–æ§åˆ¶åŸºæœ¬ç¨³å®šï¼Œå­˜åœ¨æ”¹å–„ç©ºé—´"
  },
  "key_findings": [
    {
      "type": "dawn_phenomenon",
      "severity": "moderate",
      "description": "æ£€æµ‹åˆ°æ˜æ˜¾é»æ˜ç°è±¡ï¼Œè¡€ç³–ä¸Šå‡é€Ÿç‡1.2mmol/L/h",
      "clinical_significance": "æç¤ºåŸºç¡€èƒ°å²›ç´ å‰‚é‡æˆ–æ—¶æœºéœ€è¦è°ƒæ•´"
    }
  ],
  "clinical_recommendations": [
    {
      "category": "insulin_adjustment",
      "priority": "medium",
      "recommendation": "å»ºè®®è°ƒæ•´åŸºç¡€èƒ°å²›ç´ å‰‚é‡æˆ–æ³¨å°„æ—¶é—´",
      "rationale": "é»æ˜ç°è±¡æ£€æµ‹ï¼Œå¯èƒ½éœ€è¦ä¼˜åŒ–åŸºç¡€èƒ°å²›ç´ æ²»ç–—",
      "follow_up": "1-2å‘¨åå¤æŸ¥AGPè¯„ä¼°æ•ˆæœ"
    }
  ]
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ–‡ä»¶è¯»å–å¤±è´¥**
   ```
   é”™è¯¯ï¼šæ— æ³•è¯»å–CGMæ–‡ä»¶
   è§£å†³ï¼šæ£€æŸ¥æ–‡ä»¶æ ¼å¼å’Œç¼–ç ï¼ˆå»ºè®®UTF-8ï¼‰
   ```

2. **æ•°æ®è´¨é‡ä¸è¶³**
   ```
   é”™è¯¯ï¼šæ•°æ®è´¨é‡ä¸åˆæ ¼ï¼Œæ— æ³•è¿›è¡Œå¯é çš„AGPåˆ†æ
   è§£å†³ï¼šç¡®ä¿è‡³å°‘14å¤©æ•°æ®ï¼Œæ•°æ®å®Œæ•´æ€§>70%
   ```

3. **å›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸**
   ```
   é”™è¯¯ï¼šä¸­æ–‡å­—ä½“æ˜¾ç¤ºæ–¹æ¡†
   è§£å†³ï¼šå®‰è£…ä¸­æ–‡å­—ä½“æˆ–ä¿®æ”¹å­—ä½“è®¾ç½®
   ```

4. **å†…å­˜ä¸è¶³**
   ```
   é”™è¯¯ï¼šå¤„ç†å¤§æ–‡ä»¶æ—¶å†…å­˜æº¢å‡º
   è§£å†³ï¼šåˆ†æ‰¹å¤„ç†æ•°æ®æˆ–å¢åŠ ç³»ç»Ÿå†…å­˜
   ```

### æ€§èƒ½ä¼˜åŒ–

```python
# å¤§æ•°æ®é›†å¤„ç†ä¼˜åŒ–
enhanced_agpai = EnhancedAGPAISystem()

# è®¾ç½®è¾ƒçŸ­çš„åˆ†æå‘¨æœŸ
results = enhanced_agpai.comprehensive_analysis_with_annotations(
    cgm_file_path="large_dataset.csv",
    patient_info=patient_info,
    analysis_days=7,  # å‡å°‘åˆ†æå¤©æ•°
    output_dir="./output"
)
```

## æ‰©å±•å¼€å‘

### è‡ªå®šä¹‰æ ‡æ³¨ç±»å‹

```python
class CustomAnnotationEngine(AGPAnnotationEngine):
    def identify_annotation_points(self, analysis_results, agp_curve):
        annotations = super().identify_annotation_points(analysis_results, agp_curve)
        
        # æ·»åŠ è‡ªå®šä¹‰æ ‡æ³¨é€»è¾‘
        custom_annotation = {
            'type': 'custom_pattern',
            'x': 12,  # å°æ—¶
            'y': 8.0,  # è¡€ç³–å€¼
            'text': 'è‡ªå®šä¹‰æ ‡æ³¨',
            'priority': 'medium_priority',
            'arrow_direction': 'up'
        }
        annotations.append(custom_annotation)
        
        return annotations
```

### é›†æˆç¬¬ä¸‰æ–¹ç³»ç»Ÿ

```python
# ä¸HISç³»ç»Ÿé›†æˆç¤ºä¾‹
def integrate_with_his(patient_id, results):
    his_data = {
        'patient_id': patient_id,
        'analysis_date': datetime.now(),
        'tir': results['analysis_results']['target_range_coverage'],
        'cv': results['analysis_results']['glucose_coefficient_of_variation'],
        'recommendations': results['intelligent_report']['clinical_recommendations']
    }
    
    # å‘é€åˆ°HISç³»ç»Ÿ
    # his_api.upload_agp_analysis(his_data)
```

## ç‰ˆæœ¬æ›´æ–°

### v1.0 ç‰¹æ€§
- âœ… åŸºç¡€AGPæ ‡æ³¨åŠŸèƒ½
- âœ… æ¯æ—¥æ›²çº¿æ ‡æ³¨
- âœ… 57ç§è§†è§‰æŒ‡æ ‡åˆ†æ
- âœ… ä¸´åºŠè§£è¯»æŠ¥å‘Š
- âœ… å¤šæ ¼å¼è¾“å‡º

### è®¡åˆ’æ›´æ–°
- ğŸ“… v1.1ï¼šå¢åŠ è¿åŠ¨ã€ç”¨è¯äº‹ä»¶æ ‡æ³¨
- ğŸ“… v1.2ï¼šæ”¯æŒå¤šå‘¨æœŸè¶‹åŠ¿åˆ†æ
- ğŸ“… v1.3ï¼šAIé©±åŠ¨çš„ä¸ªæ€§åŒ–å»ºè®®
- ğŸ“… v2.0ï¼šå®æ—¶æ ‡æ³¨å’Œé¢„è­¦ç³»ç»Ÿ

## æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- é‚®ç®±ï¼šsupport@agpai.com
- æ–‡æ¡£ï¼šhttps://docs.agpai.com
- é—®é¢˜æŠ¥å‘Šï¼šhttps://github.com/agpai/issues

### åŸ¹è®­èµ„æº
- [AGPAIæ ‡æ³¨ç³»ç»ŸåŸ¹è®­è§†é¢‘](link)
- [ä¸´åºŠåº”ç”¨æ¡ˆä¾‹é›†](link)
- [æœ€ä½³å®è·µæŒ‡å—](link)

---

*æœ¬ä½¿ç”¨æŒ‡å—æŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨æœ€æ–°ç‰ˆæœ¬ã€‚*