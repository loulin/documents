# 个性化营养管理系统 - 界面使用指南

**版本**: v1.0
**更新时间**: 2025年09月21日
**界面技术**: Streamlit Web应用

---

## 🚀 快速启动

### 系统要求
- **Python**: 3.8 或更高版本
- **内存**: 建议 4GB 以上
- **浏览器**: Chrome、Firefox、Safari、Edge (现代浏览器)
- **网络**: 无需联网，本地运行

### 启动步骤

#### Windows用户
```bash
# 1. 双击运行启动脚本
run_interface.bat

# 或在命令行中运行
python -m streamlit run nutrition_interface.py
```

#### Mac/Linux用户
```bash
# 1. 设置执行权限
chmod +x run_interface.sh

# 2. 运行启动脚本
./run_interface.sh

# 或直接运行
streamlit run nutrition_interface.py
```

#### 手动启动
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 启动界面
streamlit run nutrition_interface.py --server.port=8501
```

### 访问界面
启动成功后，在浏览器中访问: **http://localhost:8501**

---

## 🎯 界面概览

### 主要页面
- **📋 数据填写**: 患者信息录入和偏好设置
- **📊 分析结果**: 个性化推荐和可视化分析
- **📖 系统说明**: 功能介绍和使用说明

### 界面布局
```
┌─────────────────────────────────────────┐
│ 🍽️ 个性化营养管理系统                    │ ← 主标题
├─────────────────────────────────────────┤
│ 📋 导航菜单  │  主要内容区域              │
│ - 数据填写   │  ┌─────────────────────┐  │
│ - 分析结果   │  │                     │  │
│ - 系统说明   │  │    表单/结果显示     │  │
│              │  │                     │  │
│ ℹ️ 提示信息   │  └─────────────────────┘  │
└─────────────────────────────────────────┘
```

---

## 📝 数据填写指南

### 第一部分: 👤 基本信息

#### 必填项目
| 字段 | 说明 | 示例 | 注意事项 |
|------|------|------|----------|
| **患者姓名** | 真实姓名或化名 | 张先生 | 用于报告标识 |
| **年龄** | 当前年龄 | 35 | 1-120岁范围 |
| **性别** | 生理性别 | 男/女 | 影响代谢计算 |
| **身高** | 厘米单位 | 170 | 50-250cm范围 |
| **体重** | 公斤单位 | 65 | 20-300kg范围 |

#### 自动计算
- **BMI指数**: 根据身高体重自动计算
- **BMI分类**: 偏瘦/正常/超重/肥胖

### 第二部分: 🏥 健康状况

#### 疾病选择
```
支持疾病列表 (可多选):
✓ 代谢疾病: 糖尿病、高血脂、肥胖症
✓ 心血管: 高血压、心血管疾病、脑血管疾病
✓ 消化系统: 胃炎、胃溃疡、肠炎、便秘
✓ 其他系统: 肾病、肝病、甲状腺疾病等
```

#### 生理指标录入
| 指标类别 | 具体项目 | 正常范围 | 单位 |
|----------|----------|----------|------|
| **血压** | 收缩压/舒张压 | <120/80 | mmHg |
| **血糖** | 空腹血糖 | 3.9-6.1 | mmol/L |
| **血糖** | 糖化血红蛋白 | <5.7 | % |
| **血脂** | 总胆固醇 | <5.2 | mmol/L |
| **血脂** | 甘油三酯 | <1.7 | mmol/L |

### 第三部分: 🍽️ 饮食偏好六维度

#### 1. 🏮 偏好菜系 (可多选)
```
传统菜系:
□ 川菜    □ 粤菜    □ 鲁菜    □ 苏菜
□ 浙菜    □ 闽菜    □ 湘菜    □ 徽菜

现代风格:
□ 清淡    □ 地中海   □ 日式
```

#### 2. 🚫 不喜食物 (分类选择)
```
肉类: □ 猪肉 □ 牛肉 □ 羊肉 □ 鸡肉 □ 鸭肉
海鲜: □ 鱼类 □ 虾类 □ 蟹类 □ 贝类
内脏: □ 猪肝 □ 鸡肝 □ 腰子 □ 心脏
蔬菜: □ 苦瓜 □ 茄子 □ 冬瓜 □ 豆角
调料: □ 香菜 □ 洋葱 □ 蒜 □ 姜
```

#### 3. 🔒 饮食限制 (严格遵守)
```
宗教/伦理: □ 素食 □ 严格素食 □ 清真
健康需求: □ 低盐 □ 低糖 □ 低脂
医疗需求: □ 无麸质 □ 低嘌呤
```

#### 4. 🌶️ 辣度承受 (单选)
```
○ 不能吃辣   - 完全无辣椒
○ 微辣       - 轻微辣感
○ 中等       - 适度辣味
○ 重辣       - 强烈辣感
```

#### 5. 👨‍🍳 烹饪偏好 (可多选)
```
健康方式: □ 蒸 □ 煮 □ 炖
常规方式: □ 炒 □ 烤 □ 凉拌
少用方式: □ 油炸 (不建议)
```

#### 6. ⚠️ 过敏史 (安全关键)
```
🚨 重要提醒: 过敏信息关系生命安全！

常见过敏原:
□ 花生    □ 坚果    □ 虾蟹    □ 鸡蛋
□ 牛奶    □ 大豆    □ 麸质    □ 芝麻
```

---

## 📊 分析结果解读

### 结果页面结构
```
📊 个性化分析结果
├── 🎯 菜谱推荐      - 个性化菜品推荐
├── 🍚 GI血糖管理    - 血糖指数分析
├── 📈 健康指标      - 生理指标评估
├── 📋 完整报告      - 详细营养报告
└── 📊 可视化分析    - 图表数据展示
```

### 1. 🎯 菜谱推荐

#### 推荐结构
- **早餐推荐**: 适合早晨的营养搭配
- **午餐推荐**: 主要营养来源
- **晚餐推荐**: 清淡易消化
- **加餐推荐**: 健康零食选择

#### 个性化说明
```markdown
💡 个性化说明
已根据您的川菜口味偏好定制 (建议微辣调味)

⚠️ 注意事项
请避免: 海鲜, 动物内脏, 虾, 蟹
优先选择低GI食物，严格控制碳水化合物
```

### 2. 🍚 GI血糖管理

#### 内容组成
- **最佳选择食物**: 推荐的低GI食物
- **专业建议**: 针对性血糖管理建议
- **糖尿病膳食计划**: 专用低血糖负荷方案

#### 分类推荐
```
主食类: 燕麦片(生) (GI:40, GL:9.6)
蛋白质类: 绿豆 (GI:25, GL:6.2)
蔬菜类: 西兰花 (GI:10, GL:0.8)
水果类: 草莓 (GI:40, GL:3.1)
```

### 3. 📈 健康指标

#### 指标展示
| 指标 | 数值 | 状态 | 说明 |
|------|------|------|------|
| BMI | 22.1 | 正常 | 体重状况良好 |
| 血压 | 120/80 | 正常 | 血压控制理想 |
| 空腹血糖 | 5.6 | 正常 | 血糖水平正常 |
| 糖化血红蛋白 | 5.5% | 正常 | 长期血糖控制良好 |

#### 风险评估
```
🎯 风险评估
- 体重状态: 正常 (绿色)
- 血压风险: 低 (绿色)
- 糖尿病风险: 低 (绿色)
```

### 4. 📋 完整报告

#### 报告内容
- **患者基本信息汇总**
- **综合健康评估**
- **个性化营养建议**
- **膳食搭配方案**
- **监测计划建议**

#### 下载功能
- **格式**: Markdown (.md)
- **命名**: 营养评估报告_YYYYMMDD_HHMMSS.md
- **用途**: 保存、打印、分享

### 5. 📊 可视化分析

#### 图表类型

**健康指标雷达图**
```
    BMI
     |
胆固醇 — 血压
     |
   血糖
```
- 显示各项健康指标评分 (0-10分)
- 绿色区域表示健康状态

**菜系分布饼图**
```
推荐菜系分布:
清淡: 40%
粤菜: 30%
苏菜: 20%
其他: 10%
```

**个性化匹配度柱状图**
```
匹配度评估:
菜系偏好: ████████▒▒ 80%
安全性:   ██████████ 100%
限制遵守: █████████▒ 90%
口味适配: ████████▒▒ 80%
营养需求: ████████▒▒ 85%
制作偏好: ███████▒▒▒ 70%
```

---

## 🔧 使用技巧

### 数据填写技巧

1. **循序渐进**
   - 按照页面顺序逐步填写
   - 不确定的项目可以暂时跳过
   - 可以随时返回修改

2. **准确性优先**
   - 健康数据尽量准确
   - 过敏信息务必如实填写
   - 疾病状况要完整

3. **偏好设置**
   - 偏好可以多选，系统会智能匹配
   - 不要过度限制，影响推荐多样性
   - 可以尝试新的菜系风格

### 界面操作技巧

1. **表单提交**
   - 所有信息填写完成后点击"生成个性化分析"
   - 系统会自动验证必填项
   - 生成过程需要10-30秒

2. **结果查看**
   - 使用标签页切换不同分析内容
   - 可以展开/收起详细信息
   - 支持图表缩放和交互

3. **数据保存**
   - 系统会自动保存当前会话数据
   - 可以下载完整报告保存
   - 建议及时保存重要分析结果

### 常见问题解决

#### 1. 页面加载缓慢
```
原因: 系统初始化需要时间
解决: 耐心等待，初次运行较慢
```

#### 2. 分析生成失败
```
原因: 必填项缺失或数据异常
解决: 检查姓名等必填项，确保数据合理
```

#### 3. 图表显示异常
```
原因: 浏览器兼容性问题
解决: 使用Chrome、Firefox等现代浏览器
```

#### 4. 中文显示乱码
```
原因: 系统编码设置
解决: 确保使用UTF-8编码，重启应用
```

---

## 🎯 最佳实践

### 临床使用建议

1. **患者准备**
   - 提前准备近期体检报告
   - 了解家族病史和用药情况
   - 思考真实的饮食偏好

2. **数据录入**
   - 建议由专业人员协助录入
   - 确保数据的准确性和完整性
   - 重点关注过敏和限制信息

3. **结果解释**
   - 向患者详细解释分析结果
   - 强调个性化推荐的科学依据
   - 制定可执行的实施计划

### 家庭使用建议

1. **全家参与**
   - 可以为家庭成员分别建档
   - 对比分析不同的营养需求
   - 制定家庭健康饮食计划

2. **定期更新**
   - 建议每3-6个月更新一次数据
   - 特别是健康状况变化时
   - 根据季节调整饮食偏好

3. **持续改进**
   - 记录实际执行效果
   - 根据反馈调整偏好设置
   - 逐步培养健康饮食习惯

---

## 📞 技术支持

### 故障排除

1. **启动失败**
   - 检查Python版本 (≥3.8)
   - 安装必要依赖包
   - 确认文件路径正确

2. **功能异常**
   - 查看控制台错误信息
   - 重启应用程序
   - 清除浏览器缓存

3. **性能问题**
   - 关闭其他占用内存的程序
   - 使用推荐的浏览器
   - 检查系统资源使用情况

### 联系支持
- **技术咨询**: 系统开发团队
- **使用指导**: 专业营养师
- **问题反馈**: GitHub Issues

---

## 🔄 版本更新

### 当前版本: v1.0
- ✅ 完整的六维度饮食偏好管理
- ✅ 35+种疾病营养支持
- ✅ GI数据库血糖管理
- ✅ 可视化分析图表
- ✅ 专业营养报告生成

### 计划更新
- 🔄 移动端适配
- 🔄 多语言支持
- 🔄 云端数据同步
- 🔄 AI智能推荐增强

---

*本指南将根据用户反馈和系统更新持续完善*
*如有疑问或建议，请随时联系我们*