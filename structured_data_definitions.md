# 结构化数据定义

## 1. 食物摄入结构化数据定义

**核心识别与上下文信息：**

*   `record_id` (字符串/UUID): 每条食物记录的唯一标识符。
*   `patient_id` (字符串): 关联到该食物记录的患者唯一 ID。
*   `meal_timestamp` (时间戳/日期时间): 记录该餐次被摄入或拍照的精确时间。
*   `meal_type` (字符串): 餐次类型 (例如：`早餐`, `午餐`, `晚餐`, `加餐`, `夜宵`)。
*   `image_url` (字符串, 可选): 原始食物图片的存储路径或 URL。

**食物项详情（一个餐次可能包含多个食物项，扁平化处理）：**

*   `food_item_name` (字符串): 识别出的食物名称。
*   `food_category` (字符串, 可选): 食物的宏观分类 (例如：`主食`, `蔬菜`, `肉类`, `水果`)。
*   `estimated_quantity_g` (浮点数): 估算的食物摄入量，单位为克（g）。
*   `estimated_quantity_unit` (字符串, 可选): 估算量的单位 (例如：`g`, `ml`, `个`, `片`)。
*   `confidence_score` (浮点数, 可选): 大模型识别该食物项的置信度（0-1之间）。

**营养成分信息（估算）：**

*   `calories_kcal` (浮点数): 估算的卡路里总量（千卡）。
*   `protein_g` (浮点数): 估算的蛋白质含量（克）。
*   `fat_g` (浮点数): 估算的脂肪含量（克）。
*   `carbohydrates_g` (浮点数): 估算的碳水化合物含量（克）。
*   `fiber_g` (浮点数, 可选): 估算的膳食纤维含量（克）。
*   `sugar_g` (浮点数, 可选): 估算的糖含量（克）。
*   `sodium_mg` (浮点数, 可选): 估算的钠含量（毫克）。

**附加研究与分析字段（可选）：**

*   `is_processed_food` (布尔值, 可选): 是否为加工食品。
*   `is_healthy_choice` (布尔值, 可选): 是否为健康选择。
*   `meal_score` (整数/浮点数, 可选): 对该餐次整体健康程度的评分。
*   `model_version_used` (字符串, 可选): 记录用于识别和估算营养信息的模型版本。

---

## 2. 患者叙述结构化数据定义

**核心识别与上下文信息：**

*   `narrative_id` (字符串/UUID): 每条患者叙述记录的唯一标识符。
*   `patient_id` (字符串): 关联到该叙述记录的患者唯一 ID。
*   `narrative_timestamp` (时间戳/日期时间): 记录该叙述被记录或提交的精确时间。
*   `source_type` (字符串): 叙述的来源类型 (例如：`患者日记`, `医生问诊记录`)。
*   `original_text` (字符串): 患者叙述的原始完整文本。

**NLP 提取的实体与概念：**

*   `extracted_symptoms` (列表/字符串): 从文本中识别出的症状列表。
*   `extracted_medications` (列表/字符串): 从文本中识别出的药物名称列表。
*   `extracted_events` (列表/字符串): 从文本中识别出的重要事件或活动。
*   `extracted_body_parts` (列表/字符串, 可选): 从文本中识别出的身体部位。
*   `extracted_dates` (列表/字符串, 可选): 文本中提及的日期信息。
*   `extracted_times` (列表/字符串, 可选): 文本中提及的时间信息。

**情感与情绪分析：**

*   `sentiment_score` (浮点数, 可选): 文本的整体情感得分。
*   `sentiment_label` (字符串, 可选): 文本的整体情感分类 (例如：`positive`, `negative`)。
*   `emotion_labels` (列表/字符串, 可选): 文本中检测到的具体情绪。

**主题与分类分析：**

*   `main_topics` (列表/字符串, 可选): 文本的主要主题或话题。
*   `narrative_category` (字符串, 可选): 预定义的叙述类别。
*   `keywords` (列表/字符串, 可选): 从文本中提取的关键短语或词语。

**量化指标（如果适用）：**

*   `symptom_count` (整数, 可选): 文本中提及的不同症状的数量。
*   `medication_count` (整数, 可选): 文本中提及的不同药物的数量。
*   `narrative_length_words` (整数, 可选): 叙述文本的字数或词数。

---

## 3. 待处理事项

*   **患者叙述文本处理的具体实现方法：** 待讨论和实现。
