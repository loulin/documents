# 1. 产品概述 (Product Overview)

本文档旨在详细定义“智能健康管理系统”的产品需求。该系统是一个连接医生、护士与患者的智能化健康管理平台。它通过一个为患者设计的、以“对话即服务”为核心的客户端，以及一个为医护团队打造的、具备AI分析能力的专业管理端，共同解决院外健康管理脱节、医患沟通效率低下、以及个性化诊疗缺失的核心痛点。

# 2. 目标与成功指标 (Goals and Success Metrics)

## 2.1. 业务目标 (Business Objectives)

* **开拓新的收入来源：** 在项目上线后的第一年内，通过线上健康管理服务包，实现每月至少 **¥30,000** 的持续性收入。
* **提升患者留存率：** 参与线上管理计划的患者，其年度复诊率或续约率相比未参与者提升 **20%**。
* **提高医护团队效率：** 在上线6个月后，通过AI辅助和护士协同工作流，使每位健康管理师能服务的患者数量提升 **50%**。

## 2.2. 产品目标 (Product Goals)

* **提升核心用户激活率：** 设计无缝的上手体验，确保新注册的医护人员在7天内至少创建一个患者档案并发送第一条消息。
* **强化患者端参与度：** 优化对话式记录流程，目标是让70%的活跃患者每周至少完成3次有效的数据记录。
* **驱动医护端效率：** AI建议的采纳率达到40%以上，并且由护士处理、无需医生介入的咨询比例达到80%。

# 3. 用户画像与用户故事 (Personas and User Stories)

## 3.1. 护士 / 健康管理师

* **作为一名** 健康管理师, **我想要** 在一个仪表盘上看到我所有患者的风险等级, **以便** 我能立刻知道今天应该优先关注谁。
* **作为一名** 健康管理师, **我想要** 在与患者沟通时，系统能自动分析他的话并提示我可能的健康风险, **以便** 我不会遗漏关键信息。
* **作为一名** 健康管理师, **我想要** 一键将复杂的病例和对话记录转给医生, **以便** 我能快速获得上级指导。
* **作为一名** 健康管理师, **我想要** 快速地给患者打上一系列标签（例如“高血压二期”、“需关注饮食”), **以便** 我能对他们进行分组和筛选。
* **作为一名** 健康管理师, **我想要** 在患者的关键指标出现异常时（如低血糖）, **立即收到** 系统的主动告警通知, **以便** 我能第一时间介入处理，防止危险发生。

## 3.2. 患者

* **作为一名** 慢性病患者, **我想要** 用说家常话的方式来记录我的饮食, **以便** 我不用去学习复杂的App界面和专业术语。
* **作为一名** 术后康复者, **我想要** 方便地向我的健康管理师描述我的不适, **以便** 我能获得专业的指导，缓解我的焦虑。
* **作为一名** 糖尿病患者, **我想要** 在我记录完某个单点血糖，或实时传输动态血糖后，能看到一个简单的反馈, **以便** 我能及时调整我的行为。
* **作为一名** 用户, **我想要** 知道我的数据只会给我的医疗团队看到, **以便** 我能放心地记录我的隐私信息。
* **作为一名** 患者, **我想要** 查看我的历史健康记录的清晰列表或时间线，同一个指标能够显示曲线的变化，**以便** 我能回顾和了解自己的健康变化趋势。
* **作为一名** 用户, **我想要** 能够方便地修改或删除我说过的记录, **以便** 在我记错或说错话时能及时纠正。
* **作为一名** 用户, **我想要** 在对话界面中清晰地分辨出哪些回复是来自AI助手，哪些是来自真人医护团队, **以便** 我能正确理解信息的性质并建立信任。AI助手，健康管理师和医生，使用不同的头像和气泡底色，医生的底色为浅紫色，AI助手为浅绿色，健康管理师为浅黄色，我自己发出的问题气泡为透明底色。

## 3.3. 医生

* **作为一名** 医生, **我想要** 只看由我的护士团队筛选和升级上来的复杂病例, **以便** 我能把时间花在最重要的决策上。
* **作为一名** 医生, **我想要** 在查看一个升级案例时，能快速浏览该患者的完整历史对话和结构化数据摘要, **以便** 我能迅速了解前因后果，ai可以给出初步的判断，把内容填充在我需要发出的录入框内。
* **作为一名** 医生, **我想要** 一个患者提交一个问题时，ai参与进行分析，并给出建议，显示在发送框的内容里，以方便我需要发送时可以发送。

# 4. 功能需求 (Feature Requirements)

## 4.1. 患者端 (Patient-Facing App)

* **F1: 统一智能对话与结构化记录流程**

  * **F1.1:** 提供一个类似微信的单一聊天输入框，用户可以输入文本信息，可以发送相册里的图片。
  * **F1.2:** 系统必须完整保存用户发送的原始对话消息。
  * **F1.3:** 在用户发送消息后，系统应异步地对消息进行分析，并以卡片的形式，在原始消息下方展示AI识别出的结构化健康数据。
  * **F1.4:** 用户必须能对AI识别的卡片进行**“确认”、“修改”或“忽略”**的操作。
  * **F1.5:** 只有经过用户**“确认”或“修改”**后的数据，才能被写入后端的结构化健康档案。如果用户“忽略”，则不写入。
  * **F1.6:** **自动化即时反馈:** 在用户确认关键数据（如血糖、血压）后，系统应根据预设规则，立即在对话流中追加一条简单的反馈消息（如“血糖值在正常范围，请继续保持”或“本次血糖偏高，建议您适当增加活动量”）。
  * **F1.7:** 消息气泡需要有明确的标识，区分发送者是“用户消息”、“医护人员消息”和“系统AI提示消息”。
  * **F1.8:** **统一内容管理:** 用户可以对**自己发送的所有消息**（包括问题咨询和数据记录的原始文本）进行编辑或撤回。对于已生成“数据卡片”的消息，撤回/修改操作将同步撤销或更新后端的结构化数据，确保数据一致性。
* **F2: 健康历史记录视图**

  * **F2.1:** 提供一个独立的“我的健康档案”页面。
  * **F2.2:** MVP阶段，以时间线的形式清晰地展示所有已记录的健康数据，每个项目支持按照时间展示曲线和相应的值。
  * **F2.3:** 支持按数据类型进行简单筛选。
  * **F2.4:** “我的健康档案”页面主要用于**查阅和筛选**历史数据。所有数据的修改和删除操作均应返回对话流中，通过管理原始消息（见F1.8）来完成，以保证操作上下文的统一。

## 4.2. 医护端 (Clinician-Facing Web/PC App)

* **F3: 患者列表与仪表盘**

  * **F3.1:** 提供一个患者列表视图，显示所有状态为“已纳入管理”的患者。
  * **F3.2:** 列表应支持按姓名、标签进行搜索和筛选。
  * **F3.3:** 系统根据后端算法计算的风险等级，在列表中用不同颜色或图标显著标出，并支持按风险等级排序。
  * **F3.4:** **分级告警通知机制**
    * **F3.4.1:** 对于“高风险”事件（如低血糖等危急值），系统必须通过**系统级推送通知**（可触发声音或震动）立即触达医护人员。
    * **F3.4.2:** 推送通知应支持在App图标上显示角标（Badging）。
    * **F3.4.3:** 所有告警（无论高低风险）都应在医护端**界面内的通知中心**聚合展示，并支持查看和处理。
* **F4: 统一沟通与分析界面**

  * **F4.1:** 采用三栏式布局：左侧为患者列表，中间为对话区域，右侧为AI分析与数据面板。
  * **F4.2:** 对话区域完整、实时地展示与患者的对话历史记录。
  * **F4.3:** AI分析面板自动加载选中患者的关键信息、结构化健康数据摘要和AI回复建议。
  * **F4.4:** 医护人员可以一键将对话“升级”给指定的医生。
* **F5: 患者管理与评估**

  * **F5.1:** 提供“添加新患者”功能，可从患者库搜索或手动创建。
  * **F5.2:** 提供一个标准的**健康评估表单**（MVP优先关注糖尿病），用于收集初始健康数据。
  * **F5.3:** 提交表单后，系统调用后端算法，计算出初始“风险等级”。
  * **F5.4:** 医护人员可根据评估结果，将患者状态标记为“**待纳入**”、“**已纳入管理**”或“**未纳入**”。
  * **F5.5:** 提供灵活的标签管理系统。

## 4.3. 后台与系统 (Backend and System)

* **F6: 用户与权限管理**

  * **F6.1:** 支持“管理员”、“医生”、“护士/健康管理师”三种角色。
  * **F6.2:** 实现角色对应的数据访问隔离。
* **F7: AI服务**

  * **F7.1:** 提供文本解析的内部API。
  * **F7.2:** 提供回复建议生成的内部API。
* **F8: 数据库**

  * **F8.1:** 设计能存储用户、对话、结构化健康数据、评估数据的表结构。

# 5. 非功能性需求 (Non-Functional Requirements)

* **NFR1: 性能:** API响应 < 500ms, 页面加载 < 3s。
* **NFR2: 安全性:** 全程HTTPS，敏感数据加密存储，抵御常见Web攻击。
* **NFR3: 可用性:** 遵循WCAG 2.1 AA标准，界面简洁直观。
* **NFR4: 合规性:** 遵守中国的《网络安全法》和《个人信息保护法》。

# 6. 范围边界 (Out of Scope for MVP)

* **多模态输入:** 不支持语音识别、文件上传（图片除外）。
* **自动化工作流:** 不支持自动化的任务分配和周期性提醒。
* **支付与计费:** 不包含任何在线支付、账单生成功能。
* **高级运营报表:** 不提供给管理员使用的高级数据分析和运营仪表盘。
* **复杂的权限自定义:** 不支持超出“管理员/医生/护士”三级体系的精细化权限配置。
* **数据导出:** 不提供将患者数据批量导出的功能。
